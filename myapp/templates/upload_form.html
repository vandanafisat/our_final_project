
{% load static %}

<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Recruitment</title>
    <style>
    body{
      background-image: url({% static 'rt.jpg' %});
      background-size: cover;
      background-attachment: fixed;
      zoom:95%;
    }
      table{
        opacity: 75%;
      }
      .table .btn{
        margin:5px;
      }
      td{
        font-size: 15px;
      }
      th, td{
        padding: 10px;
        text-align: center;
      }
      th{
        background-color: #5f9ea0;
        color: #334045;
      }
      tr{
        background-color: #fbf1e5
;
      }
      .btn {
        margin-left: 250px;
        margin-top: 30px;
      }
    </style>
    <link type="text/css" href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet"/>



  </head>
  <body>

    <p><br /></p>
    <div class="conatiner">
      <p></p>
      <button class="btn btn-success btn-lg" data-toggle="modal" data-target="#adddata" style="background-color: cadetblue;border-color: cadetblue;">New Recruitment</button>
      </div>


        <!-- Modal -->
        <div class="modal fade" id="adddata" tabindex="-1" role="dialog" aria-labelledby="addLabel">
          <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                  <h3 class="modal-title" id="addLabel">New Recruitment</h3>
                </div>
                <div class="modal-body">
                  <form action="" method="post"> 
                  {% csrf_token %}
                    <div class="form-group">
                      <label for="a">RGS ID</label>
                      <input type="text" class="form-control" name="a" id="a" placeholder="RGS ID">
                    </div>
                    <div class="form-group">
                      <label for="b">RGS ID Status</label>
                      <input type="text" class="form-control" name="b" id="b" placeholder="RGS ID Status">
                    </div>
                    <div class="form-group">
                      <label for="c">Role</label>
                      <input type="text" class="form-control" name="c" id="c" placeholder="Role">
                    </div>
                    <div class="form-group">
                      <label for="d">Required skill set</label>
                      <input type="text" class="form-control" name="d" id="d" placeholder="Required skill set">
                    </div>
                    <div class="form-group">
                      <label for="e">Total experience</label>
                      <input type="text" class="form-control" name="e" id="e" placeholder="Total experience">
                    </div>
                    <div class="form-group">
                      <label for="f">Branch</label>
                      <input type="text" class="form-control" name="f" id="f" placeholder="Branch">
                    </div>
                    <div class="form-group">
                      <label for="g">IOU</label>
                      <input type="text" class="form-control" name="g" id="g" placeholder="IOU">
                    </div>
                    <div class="form-group">
                      <label for="h">Requirement IOU</label>
                      <input type="text" class="form-control" name="h" id="h" placeholder="Requirement IOU">
                    </div>
                    <div class="form-group">
                      <label for="i">Customer Name</label>
                      <input type="text" class="form-control" name="i" id="i" placeholder="Customer Name">
                    </div>
                    <div class="form-group">
                      <label for="j">Assigned Date</label>
                      <input type="date" class="form-control" name="j" id="j" placeholder="Assigned Date">
                    </div>
                    <div class="form-group">
                      <label for="k">Requirement branch</label>
                      <input type="text" class="form-control" name="k" id="k" placeholder="Requirement branch">
                    </div>
                    <div class="form-group">
                      <label for="l">Staffing Branch</label>
                      <input type="text" class="form-control" name="l" id="l" placeholder="Staffing Branch">
                    </div>
                    <input type="submit" value="Submit" />
                  </form>


                  <form action="" enctype="multipart/form-data"  method="post">
                    <table>
                      <td><label style="color:#3a87ad; font-size:18px;">Insert the excel</label></td>
                      {{ form.as_table }}
                    </table>
                    {% csrf_token %}
                    <input type="submit" value="Submit">
                </form>
              </div>
                  <div class="modal-footer">
                  <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">Close</button>
                  <!--<button type="button" onclick="save_data()"  class="btn btn-primary btn-sm">Save</button> data-dismiss="modal"-->
                 </div>
                 </div>
                 </div>
                 </div>        


    <div class="conatiner"> 
      <p></p>
      <button class="btn btn-success btn-lg" data-toggle="modal" data-target="#adddata1" style="background-color: cadetblue;border-color: cadetblue;">New Profiles</button>

      <a href="/download" class="btn btn-success btn-lg" style="background-color: cadetblue;border-color: cadetblue;">Download</a>

        <!-- Modal -->
        <div class="modal fade" id="adddata1" tabindex="-1" role="dialog" aria-labelledby="addLabel">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
                                    <div class="modal-header">
                                      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                      <h3 class="modal-title" id="addLabel">New Profiles</h3>
                                    </div>

                                    <div class="modal-body">
                                    <form action="" method="post"> 
                    {% csrf_token %}
                    <div class="form-group">
                      <label for="A">RGS ID</label>
                      <select class="data-list-input" name="A" id="A" style="width:570px; height:35px;"">
                        {% for entry in approvals %}
                          <option value="{{ entry.RGS_ID }}">{{ entry.RGS_ID }}</option>  
                        {% endfor %}
                      </select>
                    </div>

                                      <div class="form-group">
                                        <label for="B">Date of tracker</label>
                                        <input type="date" class="form-control" name="B" id="B" placeholder="Date of tracker">
                                      </div>
                                      <div class="form-group">
                                        <label for="C">Branch</label>
                                        <input type="text" class="form-control" name="C" id="C" placeholder="Branch">
                                      </div>
                                      <div class="form-group">
                                        <label for="D">Who sourced the cv -Name</label>
                                        <input type="text" class="form-control" name="D" id="D" placeholder="Who sourced the cv -Name">
                                      </div>
                                      <div class="form-group">
                                        <label for="E">Who sourced the cv -Employee number</label>
                                        <input type="text" class="form-control" name="E" id="E" placeholder="Who sourced the cv -Employee number">
                                      </div>
                                      <div class="form-group">
                                        <label for="F">Candidate name</label>
                                        <input type="text" class="form-control" name="F" id="F" placeholder="Candidate name">
                                      </div>
                                      <div class="form-group">
                                        <label for="G">EP number</label>
                                        <input type="text" class="form-control" name="G" id="G" placeholder="EP number">
                                      </div>
                                      <div class="form-group">
                                        <label for="H">Source details</label>
                                        <input type="text" class="form-control" name="H" id="H" placeholder="Source details">
                                      </div>
                                      <div class="form-group">
                                        <label for="I">Main skills</label>
                                        <input type="text" class="form-control" name="I" id="I" placeholder="Main skills">
                                      </div>
                                      <div class="form-group">
                                        <label for="J">ISU Name</label>
                                        <input type="text" class="form-control" name="J" id="J" placeholder="ISU Name">
                                      </div>
                                      <div class="form-group">
                                        <label for="K">Customer name</label>
                                        <input type="text" class="form-control" name="K" id="K" placeholder="Customer name">
                                      </div>
                                      <div class="form-group">
                                        <label for="L">Weekend/Weekday</label>
                                        <input type="text" class="form-control" name="L" id="L" placeholder="Weekend/Weekday">
                                      </div>
                                      <div class="form-group">
                                        <label for="M">Date of interview</label>
                                        <input type="date" class="form-control" name="M" id="M" placeholder="Date of interview">
                                      </div>
                                      <div class="form-group">
                                        <label for="N">Status</label>
                                        <input type="text" class="form-control" name="N" id="N" placeholder="Status">
                                      </div>
                                      <div class="form-group">
                                        <label for="O">Contact number</label>
                                        <input type="text" class="form-control" name="O" id="O" placeholder="Contact number">
                                      </div>
                                      <div class="form-group">
                                        <label for="P">Email ID</label>
                                        <input type="email" class="form-control" name="P" id="P" placeholder="Email ID">
                                      </div>
                                      <div class="form-group">
                                        <label for="Q">Total yrs of experience </label>
                                        <input type="text" class="form-control" name="Q" id="Q" placeholder="Total yrs of experience">
                                      </div>
                                      <div class="form-group">
                                        <label for="R">R.experience</label>
                                        <input type="text" class="form-control" name="R" id="R" placeholder="R.experience">
                                      </div>
                                      <div class="form-group">
                                        <label for="S">Current Organisation</label>
                                        <input type="text" class="form-control" name="S" id="S" placeholder="Current Organisation">
                                      </div>
                                      <div class="form-group">
                                        <label for="T">Current Location</label>
                                        <input type="text" class="form-control" name="T" id="T" placeholder="Current Locaion">
                                      </div>
                                      <div class="form-group">
                                        <label for="U">Prefered Location </label>
                                        <input type="text" class="form-control" name="U" id="U" placeholder="Prefered Location">
                                      </div>
                                      <div class="form-group">
                                        <label for="V">Current CTC</label>
                                        <input type="text" class="form-control" name="V" id="V" placeholder="Current CTC">
                                      </div>
                                      <div class="form-group">
                                        <label for="W">Expected CTC</label>
                                        <input type="text" class="form-control" name="W" id="W" placeholder="Expected CTC">
                                      </div>
                                      <div class="form-group">
                                        <label for="X">Notice period</label>
                                        <input type="text" class="form-control" name="X" id="X" placeholder="Notice period">
                                      </div>
                                      <input type="hidden" name="sou_id" id="sou_id" value="hello">
                                      <input type="submit" value="Submit" />
                                      </form>

                

                        <form action="" enctype="multipart/form-data"  method="post">
                          <table>
                          <td><label style="color:#3a87ad; font-size:18px;">Insert the excel</label></td>
                            {{ form.as_table }}
                        </table>
                            {% csrf_token %}

                        <input type="submit" value="Submit">
                      </form>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">Close</button>
                        <!--<button type="button" onclick="save_data()"  class="btn btn-primary btn-sm">Save</button> data-dismiss="modal"-->
            </div>
          </div>
        </div>
    </div>


               <div class="container">
                    <h1 align="center"><strong style="color: #fff5ee;">Recruitments</strong></h1>
                    <br />
                    <div id="main"></div>
                    <div class="table-responsive">
                         <table id="trip_data" class="table table-striped table-bordered">
                              <thead>
                                   <tr>
                                        <th>Options</th>
                                        <th>RGS ID</th>
                                        <th>RGS ID status</th>
                                        <th>Role</th>
                                        <th>Required Skill set</th>
                                        <th>Total experience</th>
                                        <th>Branch</th>
                                        <th>IOU</th>
                                        <th>Requirement IOU</th>
                                        <th>Customer Name</th>
                                        <th>Assigned Date</th>
                                        <th>Requirement Branch</th>
                                        <th>Staffing Branch</th>
                                   </tr>
                              </thead>

                            {% for i in approvals %}
                                <tr>
                                
                                    <td><!--<button type="button" onclick="join_data(this)" data-id1="'.$row["rgsid"].'" class="btn btn-warning btn-xs">Update</button>-->
                                    <button type="button" onclick='del("{{i.RGS_ID}}")' class="btn btn-danger btn-xs" data-toggle="modal" data-target="#delinfo">Delete</button>
                                    <button type="button" class="btn btn-primary btn-xs" data-toggle="modal" data-target="#myModal2" onclick='my_func("{{ i.RGS_ID }}")' id="Got the id">&#x2139;</button>

    


                                    </td>
                                    <td>{{i.RGS_ID}}</td>
                                    <td>{{i.RGS_status}}</td>
                                    <td>{{i.role}}</td>
                                    <td>{{i.rqd_skset}}</td>
                                    <td>{{i.tot_exp}}</td>
                                    <td>{{i.branch}}</td>
                                    <td>{{i.IOU}}</td>
                                    <td>{{i.req_IOU}}</td>
                                    <td>{{i.cust_name}}</td>
                                    <td>{{i.ass_date|date:"D d M Y"}}</td>
                                    <td>{{i.req_branch}}</td>
                                    <td>{{i.staff_branch}}</td>
                                </tr>
                            {% endfor %}
                    


                         </table>
                         <form id="form_id" method="get" action="/applicant">
                         	<input type="hidden" name="hid" id="hid" value="">
                         </form>
                         
                         <form id="form_delete" method="get" action="">
                          <input type="hidden" name="del_id" id="del_id" value="">
                         </form>

                    </div>
               </div>
               </div>
               </div>
               </div>
                <p><br /></p>
                  <p><br /></p>


                      <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
                      <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
                      <!--[if lt IE 9]>
                        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
                        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
                      <![endif]-->
              <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
              <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
              <!-- Include all compiled plugins (below), or include individual files as needed -->
              <script src="{% static 'js/bootstrap.min.js' %}"></script>
              <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
              <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />
              <script src="https://cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js"></script>
              <link rel="stylesheet" href="https://cdn.datatables.net/1.10.12/css/dataTables.bootstrap.min.css" />
              <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
              <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />
              <script src="https://cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js"></script>
              <script src="https://cdn.datatables.net/1.10.12/js/dataTables.bootstrap.min.js"></script>
              <link rel="stylesheet" href="https://cdn.datatables.net/1.10.12/css/dataTables.bootstrap.min.css" />
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" />
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>


  </body>
</html>
<script>
 /*$("#myModal2").on('shown.bs.modal',function(e){
  var sourceElement=e.relatedTarget;
  var id=$(sourceElement).closest('tr').find("td:first").text();
  alert(id);
  $(".idhere").html(id);
});*/

function my_func(h) {
    document.getElementById("hid").value = h;
    document.getElementById("form_id").submit();   
}

$(document).ready(function(){
      autodelete();
     $('#trip_data').DataTable();
});
function ref_data(){
  location.reload();
}
function autodelete(){
  $.ajax({
       url:"autodelete.php",
       method:"POST",
       success:function(data){
       }
  });
}
function fetch_data(elem){
          var id = $(elem).data("id4");
           $.ajax({
                url:"sel.php",
                method:"POST",
                data:{id:id},
                dataType:"text",
                success:function(data){
                     $('#live_data').html(data);
                }
           });
      }
function del(elem1){
var r = confirm("Are you sure, you want to delete");
    if (r == true) {
        document.getElementById("del_id").value = elem1;
        document.getElementById("form_delete").submit();
    }
}
function join_data(elem2){
      var idj=$(elem2).data("id1");
                    $.ajax({
                                         url:"join.php",
                                         method:"POST",
                                         data:{id:idj},
                                         dataType:"text",
                                         success:function(data){
                                           if(data=="1")
                                           location.reload();
                                           else
                                           alert('Already joined ');
                                         }
                                    });
}
function save_data(){
                  var name = $('#nm').val();
                  var dest = $('#dm').val();
                  var sdate = $('#sm').val();
                  var edate = $('#em').val();
                  var address = $('#am').val();
                  $.ajax({
                url:"insert.php",
                method:"POST",
                data:{ name: name, dest: dest, sdate: sdate, edate: edate, address: address },
                dataType:"json",
                success:function(data)
                {
                  location.reload();

                }
           })
           ref_data();

}

function formatDate(date) {
    var d = new Date(date),
        month = '' + (d.getMonth() + 1),
        day = '' + d.getDate(),
        year = d.getFullYear();

    if (month.length < 2) month = '0' + month;
    if (day.length < 2) day = '0' + day;

    return [year, month, day].join('-');
}

$('#a').on('change', function(){
  var input=$(this);
  var firstid=input.val();
  //do your ajax call here
  {% for person in approvals %}
    var personArray ;
    personArray = '{{person.RGS_ID}}';
    if(personArray == firstid)
    {
      //alert('{{person.ass_date|date:"D d M Y"}}');
      document.getElementById("b").value='{{person.RGS_status}}';
      document.getElementById("c").value='{{person.role}}';
      document.getElementById("d").value='{{person.rqd_skset}}';
      document.getElementById("e").value='{{person.tot_exp}}';
      document.getElementById("f").value='{{person.branch}}';
      document.getElementById("g").value='{{person.IOU}}';
      document.getElementById("h").value='{{person.req_IOU}}';
      document.getElementById("i").value='{{person.cust_name}}';
      document.getElementById("j").value=formatDate('{{person.ass_date|date:"D d M Y"}}');
      document.getElementById("k").value='{{person.req_branch}}';
      document.getElementById("l").value='{{person.staff_branch}}';
    }  
  {% endfor %}
  //input.next('span.info').html(input.val());
});




/*$('#A').on('change', function(){
  var input=$(this);
  var firstid=input.val();
  //do your ajax call here
  {% for person in sources %}
    var personArray ;
    personArray = '{{person.RGS_ID}}';
    if(personArray == firstid)
    {
      //alert('{{person.ass_date|date:"D d M Y"}}');
      document.getElementById("C").value='{{person.branch}}';
      document.getElementById("D").value='{{person.who_sourced_name}}';
      document.getElementById("E").value='{{person.who_sourced_eno}}';
      document.getElementById("F").value='{{person.cand_name}}';
      document.getElementById("G").value='{{person.epno}}';
      document.getElementById("H").value='{{person.source_dtls}}';
      document.getElementById("I").value='{{person.main_skills}}';
      document.getElementById("J").value='{{person.ISU_name}}';
      document.getElementById("K").value='{{person.customer_name}}';
      document.getElementById("L").value='{{person.weekend_weekday}}';
      //document.getElementById("M").value='{{person.branch}}';
      document.getElementById("N").value='{{person.status}}';
      document.getElementById("O").value='{{person.contact_number}}';
      document.getElementById("P").value='{{person.email_id}}';
      document.getElementById("Q").value='{{person.tot_yrs_exp}}';
      document.getElementById("R").value='{{person.R_exp}}';
      document.getElementById("S").value='{{person.current_org}}';
      document.getElementById("T").value='{{person.current_loc}}';
      document.getElementById("U").value='{{person.pref_loc}}';
      document.getElementById("V").value='{{person.current_ctc}}';
      document.getElementById("W").value='{{person.exp_ctc}}';
      document.getElementById("X").value='{{person.notice_period}}';
  
    }  
  {% endfor %}
  //input.next('span.info').html(input.val());
});*/

</script>
